(()=>{"use strict";const t=[];function e(){const e=localStorage.getItem("tasks");e&&(t.length=0,t.push(...JSON.parse(e)))}function n(){t.forEach(((t,e)=>{t.index=e})),localStorage.setItem("tasks",JSON.stringify(t))}function a(){e();const n=document.getElementById("todo-list");n.innerHTML="",t.sort(((t,e)=>t.index-e.index)),t.forEach(((e,s)=>{const d=document.createElement("li"),c=document.createElement("div"),o=document.createElement("input"),i=document.createElement("span"),l=document.createElement("i");o.type="checkbox",o.checked=e.completed,o.addEventListener("change",(e=>{const n=parseInt(i.dataset.index,10),s=e.target.checked;i.className="",function(e,n){const a=t.find((t=>t.index===e));a&&(a.completed=n,localStorage.setItem("tasks",JSON.stringify(t)))}(n,s),a()})),i.textContent=e.description,i.className=e.completed?"completed":"",i.dataset.index=s,i.setAttribute("contenteditable",!e.completed),c.className="task-item",c.appendChild(o),c.appendChild(i),l.className="fas fa-trash-alt text-danger float-end delete-button",d.appendChild(c),d.appendChild(l),n.appendChild(d)}))}document.getElementById("add-task-form").addEventListener("submit",(e=>{e.preventDefault(),function(e){const n={description:document.getElementById("task-input").value,completed:!1,index:t.length};t.push(n),localStorage.setItem("tasks",JSON.stringify(t))}(),a(),document.getElementById("task-input").value=""})),document.addEventListener("click",(e=>{if(e.target.classList.contains("delete-button")){const d=e.target.parentNode;s=parseInt(d.querySelector("span").dataset.index,10),t.splice(s,1),n(),localStorage.setItem("tasks",JSON.stringify(t)),d.remove(),a()}var s})),document.addEventListener("input",(e=>{if("SPAN"===e.target.tagName){const n=e.target;!function(e,n){const a=t.find((t=>t.index===e));a&&(a.description=n,localStorage.setItem("tasks",JSON.stringify(t)))}(parseInt(n.dataset.index,10),n.textContent.trim())}})),document.addEventListener("blur",(t=>{"SPAN"===t.target.tagName&&a()})),document.getElementById("clear-completed-button").addEventListener("click",(()=>{!function(){const e=t.filter((t=>!t.completed));t.length=0,Array.prototype.push.apply(t,e),n(),localStorage.setItem("tasks",JSON.stringify(t))}(),a()})),document.addEventListener("DOMContentLoaded",(()=>{e(),a()}))})();